(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50265cce"],{"1dde":function(t,a,e){var s=e("d039"),r=e("b622"),i=e("2d00"),n=r("species");t.exports=function(t){return i>=51||!s((function(){var a=[],e=a.constructor={};return e[n]=function(){return{foo:1}},1!==a[t](Boolean).foo}))}},"1f08":function(t,a,e){},"25f0":function(t,a,e){"use strict";var s=e("6eeb"),r=e("825a"),i=e("d039"),n=e("ad6d"),o="toString",l=RegExp.prototype,c=l[o],u=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=o;(u||d)&&s(RegExp.prototype,o,(function(){var t=r(this),a=String(t.source),e=t.flags,s=String(void 0===e&&t instanceof RegExp&&!("flags"in l)?n.call(t):e);return"/"+a+"/"+s}),{unsafe:!0})},"2bf6":function(t,a,e){"use strict";e("8439")},"4da8":function(t,a,e){"use strict";e("1f08")},"4de4":function(t,a,e){"use strict";var s=e("23e7"),r=e("b727").filter,i=e("1dde"),n=i("filter");s({target:"Array",proto:!0,forced:!n},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"50bc":function(t,a,e){},"65f0":function(t,a,e){var s=e("861d"),r=e("e8b5"),i=e("b622"),n=i("species");t.exports=function(t,a){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)?s(e)&&(e=e[n],null===e&&(e=void 0)):e=void 0),new(void 0===e?Array:e)(0===a?0:a)}},"837f":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main-block"},[e("div",{staticClass:"create"},[e("div",{staticClass:"create__status"},[e("div",{staticClass:"custom-control custom-switch custom-switch-on-success"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.status,expression:"pageData.status"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customSwitch3"},domProps:{checked:Array.isArray(t.pageData.status)?t._i(t.pageData.status,null)>-1:t.pageData.status},on:{change:function(a){var e=t.pageData.status,s=a.target,r=!!s.checked;if(Array.isArray(e)){var i=null,n=t._i(e,i);s.checked?n<0&&t.$set(t.pageData,"status",e.concat([i])):n>-1&&t.$set(t.pageData,"status",e.slice(0,n).concat(e.slice(n+1)))}else t.$set(t.pageData,"status",r)}}}),t.pageData.status?e("label",{staticClass:"custom-control-label",attrs:{for:"customSwitch3"}},[t._v(" Показывать ")]):e("label",{staticClass:"custom-control-label",attrs:{for:"customSwitch3"}},[t._v("Не показывать ")])])]),e("div",{staticClass:"create__gallery"},[t._l(t.galleryData,(function(a,s){return e("PagesContactsGallery",{key:a.id,staticClass:"gallery__block",attrs:{data:a,gallery:t.galleryData},on:{remove:function(a){return t.galleryData.splice(s,1)}}})})),e("button",{staticClass:"btn btn-default gallery__block-add",on:{click:function(a){return t.addGalleryBlock()}}},[e("span"),t._v(" Добавить еще кинотеатр ")])],2),e("div",{staticClass:"create__seo d-flex"},[e("p",[t._v("SEO блок:")]),e("div",{staticClass:"create__seo-info"},[e("div",{staticClass:"create__seo-info-block d-flex"},[e("p",[t._v("URL:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.SEO.url,expression:"pageData.SEO.url"}],attrs:{type:"text",placeholder:"URL"},domProps:{value:t.pageData.SEO.url},on:{input:function(a){a.target.composing||t.$set(t.pageData.SEO,"url",a.target.value)}}})]),e("div",{staticClass:"create__seo-info-block d-flex"},[e("p",[t._v("Title:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.SEO.title,expression:"pageData.SEO.title"}],attrs:{type:"text",placeholder:"Title"},domProps:{value:t.pageData.SEO.title},on:{input:function(a){a.target.composing||t.$set(t.pageData.SEO,"title",a.target.value)}}})]),e("div",{staticClass:"create__seo-info-block d-flex"},[e("p",[t._v("Keywords:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.SEO.keyword,expression:"pageData.SEO.keyword"}],attrs:{type:"text",placeholder:"word"},domProps:{value:t.pageData.SEO.keyword},on:{input:function(a){a.target.composing||t.$set(t.pageData.SEO,"keyword",a.target.value)}}})]),e("div",{staticClass:"create__seo-info-block d-flex"},[e("p",[t._v("Description:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.SEO.description,expression:"pageData.SEO.description"}],attrs:{type:"text",placeholder:"Description"},domProps:{value:t.pageData.SEO.description},on:{input:function(a){a.target.composing||t.$set(t.pageData.SEO,"description",a.target.value)}}})])])])]),e("button",{ref:"btnSave",staticClass:"btn btn-default btn-save",on:{click:t.galleryPromise}},[t._v(" Сохранить ")])])},r=[],i=(e("4de4"),e("d3b7"),e("3ca3"),e("ddb0"),e("d81d"),e("b0c0"),e("99af"),e("25f0"),e("b64b"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"block"},[e("div",{staticClass:"create"},[e("div",{staticClass:"create__status"},[e("div",{staticClass:"custom-control custom-switch custom-switch-on-success"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.galleryData.status,expression:"galleryData.status"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:t.galleryData.id},domProps:{checked:Array.isArray(t.galleryData.status)?t._i(t.galleryData.status,null)>-1:t.galleryData.status},on:{change:function(a){var e=t.galleryData.status,s=a.target,r=!!s.checked;if(Array.isArray(e)){var i=null,n=t._i(e,i);s.checked?n<0&&t.$set(t.galleryData,"status",e.concat([i])):n>-1&&t.$set(t.galleryData,"status",e.slice(0,n).concat(e.slice(n+1)))}else t.$set(t.galleryData,"status",r)}}}),t.galleryData.status?e("label",{staticClass:"custom-control-label",attrs:{for:t.galleryData.id}},[t._v(" Показывать ")]):e("label",{staticClass:"custom-control-label",attrs:{for:t.galleryData.id}},[t._v("Не показывать ")])]),e("div",{staticClass:"btn btn-default remove",on:{click:function(a){return t.$emit("remove")}}},[t._v(" Удалить ")])]),e("div",{staticClass:"create__name d-flex"},[e("p",[t._v("Название кинотеатра")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.galleryData.name,expression:"galleryData.name"}],attrs:{type:"text",placeholder:"Название кинотеатра"},domProps:{value:t.galleryData.name},on:{input:function(a){a.target.composing||t.$set(t.galleryData,"name",a.target.value)}}})]),e("div",{staticClass:"create__adress d-flex"},[e("p",[t._v("Адресс")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.galleryData.adress,expression:"galleryData.adress"}],attrs:{type:"text",placeholder:"Адресс"},domProps:{value:t.galleryData.adress},on:{input:function(a){a.target.composing||t.$set(t.galleryData,"adress",a.target.value)}}})]),e("div",{staticClass:"create__map d-flex"},[e("p",[t._v("Координаты для карты")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.galleryData.map,expression:"galleryData.map"}],attrs:{type:"text",placeholder:"Координаты для карты"},domProps:{value:t.galleryData.map},on:{input:function(a){a.target.composing||t.$set(t.galleryData,"map",a.target.value)}}})]),e("div",{staticClass:"create__main-img d-flex"},[e("p",[t._v("Главная картинка")]),e("PagesAddImage",{attrs:{sourceData:t.galleryData.mainImage},on:{mainImageChanged:t.mainImageFile}})],1)])])}),n=[],o=e("e6df"),l={name:"PagesContactsGallery",components:{PagesAddImage:o["a"]},props:["data","gallery"],data:function(){return{galleryArr:this.gallery,galleryData:this.data}},methods:{mainImageFile:function(t){void 0!==t&&(this.galleryData.mainImage={name:t.name,file:t})}}},c=l,u=(e("bc1f"),e("2877")),d=Object(u["a"])(c,i,n,!1,null,"d1629484",null),g=d.exports,f=e("2591"),m={name:"PagesAddContacts",components:{PagesContactsGallery:g},props:["dataOb","dbRef"],data:function(){return{ref:this.dbRef,galleryData:[],pageData:{id:"",status:!1,date:"",galleryCinema:[],SEO:{url:"",title:"",keyword:"",description:""}}}},methods:{addGalleryBlock:function(){this.galleryData.push({id:Math.floor(1e4*Math.random()),status:!1,name:"",adress:"",map:""}),console.log(this.galleryData)},galleryPromise:function(){var t=this;this.$refs.btnSave.classList.add("show"),this.$refs.btnSave.textContent="Сохраняется";var a=f["a"].storage().ref(this.galleryRef);if(this.galleryData.length>0){var e=this.galleryData.filter((function(t){return void 0===t.mainImage.id}));Promise.all(e.map((function(t){if(void 0!==t.mainImage)return new Promise((function(e){e(a.child(t.mainImage.name).put(t.mainImage.file).then((function(t){return t.ref.getDownloadURL()})).then((function(a){return t={id:t.id,status:t.status,name:t.name,adress:t.adress,map:t.map,mainImage:{id:Math.floor(1e4*Math.random()),name:t.mainImage.name,imageUrl:a}}})))}))}))).then((function(a){return t.onUpload(a)}))}else alert("Выберете картинки для галереи"),this.$refs.btnSave.textContent="Сохранить",this.$refs.btnSave.classList.remove("show")},onUpload:function(t){var a,e,s=this.galleryData.filter((function(t){return void 0!==t.mainImage.id})),r=s.concat(t),i=new Date;1===i.getDate().toString().length&&(a="0"+i.getDate()),1===i.getMonth().toString().length&&(e="0"+i.getMonth());var n=i.getFullYear(),o="".concat(a,".").concat(e,".").concat(n);this.pageData.id=Math.floor(1e4*Math.random()),this.pageData.date=o,this.pageData.galleryCinema=r;var l=f["a"].database().ref(this.ref);l.set(this.pageData).then(this.$refs.btnSave.textContent="Сохранено").then(this.$refs.btnSave.classList.remove("show")).then(this.$router.push("/admin/pages"))}},created:function(){void 0!==this.dataOb&&0!==Object.keys(this.dataOb).length?(this.pageData=this.dataOb,0!==this.dataOb.galleryCinema.length&&(this.galleryData=this.dataOb.galleryCinema)):void 0===this.dataOb&&this.$router.push("/admin/pages")}},p=m,v=(e("4da8"),Object(u["a"])(p,s,r,!1,null,"613bd66f",null));a["default"]=v.exports},8418:function(t,a,e){"use strict";var s=e("c04e"),r=e("9bf2"),i=e("5c6c");t.exports=function(t,a,e){var n=s(a);n in t?r.f(t,n,i(0,e)):t[n]=e}},8439:function(t,a,e){},"99af":function(t,a,e){"use strict";var s=e("23e7"),r=e("d039"),i=e("e8b5"),n=e("861d"),o=e("7b0b"),l=e("50c4"),c=e("8418"),u=e("65f0"),d=e("1dde"),g=e("b622"),f=e("2d00"),m=g("isConcatSpreadable"),p=9007199254740991,v="Maximum allowed index exceeded",h=f>=51||!r((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),y=d("concat"),b=function(t){if(!n(t))return!1;var a=t[m];return void 0!==a?!!a:i(t)},D=!h||!y;s({target:"Array",proto:!0,forced:D},{concat:function(t){var a,e,s,r,i,n=o(this),d=u(n,0),g=0;for(a=-1,s=arguments.length;a<s;a++)if(i=-1===a?n:arguments[a],b(i)){if(r=l(i.length),g+r>p)throw TypeError(v);for(e=0;e<r;e++,g++)e in i&&c(d,g,i[e])}else{if(g>=p)throw TypeError(v);c(d,g++,i)}return d.length=g,d}})},ad6d:function(t,a,e){"use strict";var s=e("825a");t.exports=function(){var t=s(this),a="";return t.global&&(a+="g"),t.ignoreCase&&(a+="i"),t.multiline&&(a+="m"),t.dotAll&&(a+="s"),t.unicode&&(a+="u"),t.sticky&&(a+="y"),a}},b0c0:function(t,a,e){var s=e("83ab"),r=e("9bf2").f,i=Function.prototype,n=i.toString,o=/^\s*function ([^ (]*)/,l="name";s&&!(l in i)&&r(i,l,{configurable:!0,get:function(){try{return n.call(this).match(o)[1]}catch(t){return""}}})},b64b:function(t,a,e){var s=e("23e7"),r=e("7b0b"),i=e("df75"),n=e("d039"),o=n((function(){i(1)}));s({target:"Object",stat:!0,forced:o},{keys:function(t){return i(r(t))}})},b727:function(t,a,e){var s=e("0366"),r=e("44ad"),i=e("7b0b"),n=e("50c4"),o=e("65f0"),l=[].push,c=function(t){var a=1==t,e=2==t,c=3==t,u=4==t,d=6==t,g=7==t,f=5==t||d;return function(m,p,v,h){for(var y,b,D=i(m),_=r(D),w=s(p,v,3),C=n(_.length),x=0,k=h||o,S=a?k(m,C):e||g?k(m,0):void 0;C>x;x++)if((f||x in _)&&(y=_[x],b=w(y,x,D),t))if(a)S[x]=b;else if(b)switch(t){case 3:return!0;case 5:return y;case 6:return x;case 2:l.call(S,y)}else switch(t){case 4:return!1;case 7:l.call(S,y)}return d?-1:c||u?u:S}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},bc1f:function(t,a,e){"use strict";e("50bc")},d81d:function(t,a,e){"use strict";var s=e("23e7"),r=e("b727").map,i=e("1dde"),n=i("map");s({target:"Array",proto:!0,forced:!n},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e6df:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main-block flex-wrap"},[void 0!==t.imageData?e("img",{ref:"filePreview",staticClass:"preview",attrs:{src:t.imageData}}):t._e(),e("input",{ref:"fileDialog",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.addImage}}),void 0===t.imageData?e("button",{staticClass:"btn btn-default",on:{click:t.openFileDialog}},[t._v(" Добавить ")]):t._e(),void 0!==t.imageData?e("button",{staticClass:"btn btn-default info-block__remove",on:{click:t.deleteImage}},[t._v(" Удалить ")]):t._e()])},r=[],i={name:"SharesAddImage",props:["sourceData"],data:function(){return{imageData:this.sourceData}},methods:{openFileDialog:function(){var t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});this.$refs.fileDialog.dispatchEvent(t)},addImage:function(){var t=this.$refs.fileDialog.files[0];this.previewImage(t)},previewImage:function(t){var a=this,e=new FileReader;e.readAsDataURL(t),e.onload=function(t){a.imageData=t.target.result},this.$emit("mainImageChanged",t)},deleteImage:function(){this.imageData=void 0,this.$emit("mainImageChanged",void 0)}},mounted:function(){void 0!==this.imageData&&(null!==this.imageData.imageUrl&&void 0!==this.imageData.imageUrl?this.$refs.filePreview.src=this.imageData.imageUrl:this.previewImage(this.imageData.imageFile))}},n=i,o=(e("2bf6"),e("2877")),l=Object(o["a"])(n,s,r,!1,null,"2f611f0e",null);a["a"]=l.exports},e8b5:function(t,a,e){var s=e("c6b6");t.exports=Array.isArray||function(t){return"Array"==s(t)}}}]);
//# sourceMappingURL=chunk-50265cce.35944661.js.map