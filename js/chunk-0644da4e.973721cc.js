(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0644da4e"],{"1dde":function(t,e,a){var n=a("d039"),i=a("b622"),s=a("2d00"),r=i("species");t.exports=function(t){return s>=51||!n((function(){var e=[],a=e.constructor={};return a[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"30d1":function(t,e,a){},"3bc1":function(t,e,a){"use strict";a("c581")},4708:function(t,e,a){"use strict";a("9fba")},"5c5b":function(t,e,a){"use strict";a("ab30")},"5e09":function(t,e,a){"use strict";a("724e")},"633c":function(t,e,a){"use strict";a("30d1")},"65f0":function(t,e,a){var n=a("861d"),i=a("e8b5"),s=a("b622"),r=s("species");t.exports=function(t,e){var a;return i(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?n(a)&&(a=a[r],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},"724e":function(t,e,a){},8418:function(t,e,a){"use strict";var n=a("c04e"),i=a("9bf2"),s=a("5c6c");t.exports=function(t,e,a){var r=n(e);r in t?i.f(t,r,s(0,a)):t[r]=a}},"9fba":function(t,e,a){},a02c:function(t,e,a){"use strict";a("dfc7")},a434:function(t,e,a){"use strict";var n=a("23e7"),i=a("23cb"),s=a("a691"),r=a("50c4"),o=a("7b0b"),c=a("65f0"),l=a("8418"),u=a("1dde"),f=u("splice"),d=Math.max,v=Math.min,h=9007199254740991,m="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var a,n,u,f,b,p,g=o(this),k=r(g.length),_=i(t,k),w=arguments.length;if(0===w?a=n=0:1===w?(a=0,n=k-_):(a=w-2,n=v(d(s(e),0),k-_)),k+a-n>h)throw TypeError(m);for(u=c(g,n),f=0;f<n;f++)b=_+f,b in g&&l(u,f,g[b]);if(u.length=n,a<n){for(f=_;f<k-n;f++)b=f+n,p=f+a,b in g?g[p]=g[b]:delete g[p];for(f=k;f>k-n+a;f--)delete g[f-1]}else if(a>n)for(f=k-n;f>_;f--)b=f+n-1,p=f+a-1,b in g?g[p]=g[b]:delete g[p];for(f=0;f<a;f++)g[f+_]=arguments[f+2];return g.length=k-n+a,u}})},ab30:function(t,e,a){},b0c0:function(t,e,a){var n=a("83ab"),i=a("9bf2").f,s=Function.prototype,r=s.toString,o=/^\s*function ([^ (]*)/,c="name";n&&!(c in s)&&i(s,c,{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(t){return""}}})},b727:function(t,e,a){var n=a("0366"),i=a("44ad"),s=a("7b0b"),r=a("50c4"),o=a("65f0"),c=[].push,l=function(t){var e=1==t,a=2==t,l=3==t,u=4==t,f=6==t,d=7==t,v=5==t||f;return function(h,m,b,p){for(var g,k,_=s(h),w=i(_),C=n(m,b,3),B=r(w.length),S=0,x=p||o,$=e?x(h,B):a||d?x(h,0):void 0;B>S;S++)if((v||S in w)&&(g=w[S],k=C(g,S,_),t))if(e)$[S]=k;else if(k)switch(t){case 3:return!0;case 5:return g;case 6:return S;case 2:c.call($,g)}else switch(t){case 4:return!1;case 7:c.call($,g)}return f?-1:l||u?u:$}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},c581:function(t,e,a){},d2c1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"cards-top"},[a("h3",[t._v("На главной верх")]),a("div",{staticClass:"cards-body"},[a("p",[t._v("Размер: 1000х190")]),a("div",{staticClass:"cards-body__blocks"},[a("BannersCardsTop")],1)])]),a("div",{staticClass:"cards-back"},[a("h3",[t._v("Сквозной банер на заднем фоне")]),a("div",{staticClass:"cards-body"},[a("p",[t._v("Размер: 2000х3000")]),a("div",{staticClass:"cards-body__blocks"},[a("BannersCardsBack")],1)])]),a("div",{staticClass:"cards-news"},[a("h3",[t._v("На главной Новости Акции")]),a("div",{staticClass:"cards-body"},[a("p",[t._v("Размер: 1000х190")]),a("div",{staticClass:"cards-body__blocks"},[a("BannersCardsNews")],1)])])])},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"main-block"},[t._l(t.dataBlocks,(function(e,n){return a("BannersCardsTopBlocks",{key:e.id,staticClass:"card__block",attrs:{data:e,sourceRef:t.ref},on:{remove:function(e){return t.removeBlock(n)}}})})),a("button",{staticClass:"btn btn-default card__block-add",on:{click:function(e){return t.openFileDialog()}}},[a("input",{ref:"fileDialog",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.addImage}}),t._v(" Добавить"),a("br"),t._v("фото ")])],2),a("div",{staticClass:"main-block__bottom"},[a("button",{ref:"btnSave",staticClass:"btn btn-default btn-save",on:{click:t.save}},[t._v(" Сохранить ")])])])},r=[],o=(a("a434"),a("d3b7"),a("3ca3"),a("ddb0"),a("d81d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info-block"},[a("div",{staticClass:"btn btn-default info-block__close",on:{click:function(e){return t.$emit("remove")}}},[a("svg",{staticClass:"info-block__close-img",attrs:{viewBox:"0 0 8 8"}},[a("path",{attrs:{d:"M1.406 0l-1.406 1.406.688.719 1.781 1.781-1.781 1.781-.688.719 1.406 1.406.719-.688 1.781-1.781 1.781 1.781.719.688 1.406-1.406-.688-.719-1.781-1.781 1.781-1.781.688-.719-1.406-1.406-.719.688-1.781 1.781-1.781-1.781-.719-.688z",id:"x",fill:"rgba(0,0,0,0.7)"}})])]),a("img",{ref:"filePreview",staticClass:"info-block__image"}),a("div",{staticClass:"input-column"},[a("div",{staticClass:"input-label"},[t._v("Url:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dataSource.url,expression:"dataSource.url"}],staticClass:"form-control info-block__input",attrs:{type:"text",placeholder:"Url"},domProps:{value:t.dataSource.url},on:{input:function(e){e.target.composing||t.$set(t.dataSource,"url",e.target.value)}}})]),a("div",{staticClass:"input-column"},[a("div",{staticClass:"input-label"},[t._v("Текст:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dataSource.text,expression:"dataSource.text"}],staticClass:"form-control info-block__input",attrs:{type:"text",placeholder:"Текст"},domProps:{value:t.dataSource.text},on:{input:function(e){e.target.composing||t.$set(t.dataSource,"text",e.target.value)}}})])])}),c=[],l=(a("b0c0"),a("2591")),u=(a("66ce"),a("588e"),{name:"BannersCardsTopBlocks",props:["sourceRef","data"],data:function(){return{dataSource:this.data}},methods:{previewImage:function(t){var e=this.$refs.filePreview,a=new FileReader;a.onload=function(t){e.src=t.target.result},a.readAsDataURL(t),this.dataSource.image=t.name,this.dataSource.imageFile=t},onDownload:function(){var t=this;this.picture=null;var e=l["a"].storage().ref(this.imageRef).child("backcard");e.getDownloadURL().then((function(e){return t.picture=e}),(function(t){return console.log(t)}))}},mounted:function(){null!==this.dataSource.image?this.$refs.filePreview.src=this.dataSource.imageUrl:this.previewImage(this.dataSource.imageFile)}}),f=u,d=(a("633c"),a("2877")),v=Object(d["a"])(f,o,c,!1,null,"7a5883ea",null),h=v.exports,m={name:"Banners",components:{BannersCardsTopBlocks:h},data:function(){return{ref:"banners/topcards/",dataBlocks:[]}},methods:{removeBlock:function(t){this.dataBlocks.splice(t,1),this.$refs.btnSave.textContent="Сохранить",this.$refs.btnSave.classList.remove("show")},openFileDialog:function(){this.$refs.fileDialog.click(),this.$refs.btnSave.textContent="Сохранить",this.$refs.btnSave.classList.remove("show")},addImage:function(){var t=this.$refs.fileDialog.files[0];void 0!==t&&this.dataBlocks.push({image:null,imageFile:this.$refs.fileDialog.files[0]})},save:function(){var t=this;this.$refs.btnSave.classList.add("show"),this.$refs.btnSave.textContent="Сохраняется";var e=l["a"].storage().ref(this.ref),a=l["a"].database().ref(this.ref);this.dataBlocks.length>0?Promise.all(this.dataBlocks.map((function(t){if(void 0!==t.imageFile)return new Promise((function(a){a(e.child(t.image).put(t.imageFile).then((function(t){return t.ref.getDownloadURL()})).then((function(e){return t.imageUrl=e})))}))}))).then((function(e){return e.map((function(e){t.handleData(e)}))})):(e.delete().catch((function(t){console.log(t)})),a.remove().catch((function(t){console.log(t)})))},handleData:function(t){this.dataBlocks.map((function(e){var a=Math.floor(1e4*Math.random());return e.id=a,{id:e.id,image:e.image,imageUrl:t,url:e.url,text:e.text}}));var e=l["a"].database().ref(this.ref);e.set(this.dataBlocks).then(this.$refs.btnSave.textContent="Сохранено")},onRead:function(){var t=this,e=l["a"].database().ref(this.ref);e.on("value",(function(e){null===e.val()?t.dataBlocks=[]:t.dataBlocks=e.val()}))}},created:function(){this.onRead()}},b=m,p=(a("5e09"),Object(d["a"])(b,s,r,!1,null,"659de60e",null)),g=p.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-block"},[null!==t.picture?a("img",{ref:"filePreview",staticClass:"preview",attrs:{src:t.picture}}):t._e(),a("input",{ref:"fileDialog",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.addImage}}),null===t.picture?a("button",{staticClass:"btn btn-default",on:{click:t.openFileDialog}},[t._v(" Добавить ")]):t._e(),null!==t.picture?a("button",{staticClass:"btn btn-default info-block__remove",on:{click:t.deleteImage}},[t._v(" Удалить ")]):t._e()])},_=[],w={name:"BannersCardsBack",data:function(){return{imageData:null,picture:null,imageRef:"banners/backcard/"}},methods:{openFileDialog:function(){var t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});this.$refs.fileDialog.dispatchEvent(t)},addImage:function(){var t=this.$refs.fileDialog.files[0];this.previewImage(t)},previewImage:function(t){var e=this.$refs.filePreview,a=new FileReader;a.onload=function(t){e.src=t.target.result},a.readAsDataURL(t),this.imageData=t,this.onUpload()},onUpload:function(){var t=this;this.picture=null;var e=l["a"].storage().ref(this.imageRef).child("backcard");e.put(this.imageData).then((function(t){return t.ref.getDownloadURL()})).then((function(e){return t.picture=e})).then((function(e){l["a"].database().ref(t.imageRef).set({name:"backcard",url:e})}))},deleteImage:function(){this.picture=null,this.$refs.filePreview.src=null;var t=l["a"].storage().ref(this.imageRef).child("backcard");t.delete().catch((function(t){console.log(t)}));var e=l["a"].database().ref(this.imageRef);e.remove().catch((function(t){console.log(t)}))},onDownload:function(){var t=this;this.picture=null;var e=l["a"].storage().ref(this.imageRef).child("backcard");e.getDownloadURL().then((function(e){return t.picture=e}),(function(t){return console.log(t)}))},onRead:function(){var t=this,e=l["a"].database().ref(this.imageRef);e.on("value",(function(e){var a=e.val();t.picture=a.url}))}},mounted:function(){this.onRead()}},C=w,B=(a("3bc1"),Object(d["a"])(C,k,_,!1,null,"3050cc33",null)),S=B.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"main-block"},[t._l(t.dataBlocks,(function(e,n){return a("BannersCardsNewsBlocks",{key:e.id,staticClass:"card__block",attrs:{data:e,sourceRef:t.ref},on:{remove:function(e){return t.removeBlock(n)}}})})),a("button",{staticClass:"btn btn-default card__block-add",on:{click:function(e){return t.openFileDialog()}}},[a("input",{ref:"fileDialog",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.addImage}}),t._v(" Добавить"),a("br"),t._v("фото ")])],2),a("div",{staticClass:"main-block__bottom"},[a("button",{ref:"btnSave",staticClass:"btn btn-default btn-save",on:{click:t.save}},[t._v(" Сохранить ")])])])},$=[],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info-block"},[a("div",{staticClass:"btn btn-default info-block__close",on:{click:function(e){return t.$emit("remove")}}},[a("svg",{staticClass:"info-block__close-img",attrs:{viewBox:"0 0 8 8"}},[a("path",{attrs:{d:"M1.406 0l-1.406 1.406.688.719 1.781 1.781-1.781 1.781-.688.719 1.406 1.406.719-.688 1.781-1.781 1.781 1.781.719.688 1.406-1.406-.688-.719-1.781-1.781 1.781-1.781.688-.719-1.406-1.406-.719.688-1.781 1.781-1.781-1.781-.719-.688z",id:"x",fill:"rgba(0,0,0,0.7)"}})])]),a("img",{ref:"filePreview",staticClass:"info-block__image"}),a("div",{staticClass:"input-column"},[a("div",{staticClass:"input-label"},[t._v("Url:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dataSource.url,expression:"dataSource.url"}],staticClass:"form-control info-block__input",attrs:{type:"text",placeholder:"Url"},domProps:{value:t.dataSource.url},on:{input:function(e){e.target.composing||t.$set(t.dataSource,"url",e.target.value)}}})])])},y=[],R={name:"BannersCardsNewsBlock",props:["sourceRef","data"],data:function(){return{dataSource:this.data}},methods:{previewImage:function(t){var e=this.$refs.filePreview,a=new FileReader;a.onload=function(t){e.src=t.target.result},a.readAsDataURL(t),this.dataSource.image=t.name,this.dataSource.imageFile=t},onDownload:function(){var t=this;this.picture=null;var e=l["a"].storage().ref(this.imageRef).child("newscard");e.getDownloadURL().then((function(e){return t.picture=e}),(function(t){return console.log(t)}))}},mounted:function(){null!==this.dataSource.image?this.$refs.filePreview.src=this.dataSource.imageUrl:this.previewImage(this.dataSource.imageFile)}},U=R,F=(a("a02c"),Object(d["a"])(U,D,y,!1,null,"60634f04",null)),P=F.exports,I={name:"BannersCardsNews",components:{BannersCardsNewsBlocks:P},data:function(){return{ref:"banners/newscards/",dataBlocks:[]}},methods:{removeBlock:function(t){this.dataBlocks.splice(t,1),this.$refs.btnSave.textContent="Сохранить",this.$refs.btnSave.classList.remove("show")},openFileDialog:function(){this.$refs.fileDialog.click(),this.$refs.btnSave.textContent="Сохранить",this.$refs.btnSave.classList.remove("show")},addImage:function(){var t=this.$refs.fileDialog.files[0];void 0!==t&&this.dataBlocks.push({image:null,imageFile:this.$refs.fileDialog.files[0]})},save:function(){var t=this;this.$refs.btnSave.classList.add("show"),this.$refs.btnSave.textContent="Сохраняется";var e=l["a"].storage().ref(this.ref),a=l["a"].database().ref(this.ref);this.dataBlocks.length>0?Promise.all(this.dataBlocks.map((function(t){if(void 0!==t.imageFile)return new Promise((function(a){a(e.child(t.image).put(t.imageFile).then((function(t){return t.ref.getDownloadURL()})).then((function(e){return t.imageUrl=e})))}))}))).then((function(e){return e.map((function(e){t.handleData(e)}))})):(e.delete().catch((function(t){console.log(t)})),a.remove().catch((function(t){console.log(t)})))},handleData:function(t){this.dataBlocks.map((function(e){var a=Math.floor(1e4*Math.random());return e.id=a,{id:e.id,image:e.image,imageUrl:t,url:e.url}}));var e=l["a"].database().ref(this.ref);e.set(this.dataBlocks).then(this.$refs.btnSave.textContent="Сохранено")},onRead:function(){var t=this,e=l["a"].database().ref(this.ref);e.on("value",(function(e){null===e.val()?t.dataBlocks=[]:t.dataBlocks=e.val()}))}},created:function(){this.onRead()}},L=I,A=(a("5c5b"),Object(d["a"])(L,x,$,!1,null,"0e69cf3e",null)),E=A.exports,M={name:"Banners",components:{BannersCardsTop:g,BannersCardsBack:S,BannersCardsNews:E}},N=M,O=(a("4708"),Object(d["a"])(N,n,i,!1,null,"5e4549e4",null));e["default"]=O.exports},d81d:function(t,e,a){"use strict";var n=a("23e7"),i=a("b727").map,s=a("1dde"),r=s("map");n({target:"Array",proto:!0,forced:!r},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dfc7:function(t,e,a){},e8b5:function(t,e,a){var n=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-0644da4e.973721cc.js.map