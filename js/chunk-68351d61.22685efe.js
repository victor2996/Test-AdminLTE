(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68351d61"],{"1dde":function(t,e,a){var i=a("d039"),n=a("b622"),r=a("2d00"),s=n("species");t.exports=function(t){return r>=51||!i((function(){var e=[],a=e.constructor={};return a[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},2506:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info-block"},[a("div",{staticClass:"btn btn-default info-block__close",on:{click:function(e){return t.$emit("remove")}}},[a("svg",{staticClass:"info-block__close-img",attrs:{viewBox:"0 0 8 8"}},[a("path",{attrs:{d:"M1.406 0l-1.406 1.406.688.719 1.781 1.781-1.781 1.781-.688.719 1.406 1.406.719-.688 1.781-1.781 1.781 1.781.719.688 1.406-1.406-.688-.719-1.781-1.781 1.781-1.781.688-.719-1.406-1.406-.719.688-1.781 1.781-1.781-1.781-.719-.688z",id:"x",fill:"rgba(0,0,0,0.7)"}})])]),a("img",{ref:"filePreview",staticClass:"info-block__image"})])},n=[],r=(a("b0c0"),{name:"SharesAddGallery",props:["data"],data:function(){return{dataSource:this.data}},methods:{previewImage:function(t){var e=this.$refs.filePreview,a=new FileReader;a.onload=function(t){e.src=t.target.result},a.readAsDataURL(t),this.dataSource.name=t.name,this.dataSource.imageFile=t}},mounted:function(){null!==this.dataSource.imageUrl&&void 0!==this.dataSource.imageUrl?this.$refs.filePreview.src=this.dataSource.imageUrl:this.previewImage(this.dataSource.imageFile)}}),s=r,o=(a("42a5"),a("2877")),c=Object(o["a"])(s,i,n,!1,null,"0dfc12e5",null);e["a"]=c.exports},"25f0":function(t,e,a){"use strict";var i=a("6eeb"),n=a("825a"),r=a("d039"),s=a("ad6d"),o="toString",c=RegExp.prototype,l=c[o],d=r((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=o;(d||u)&&i(RegExp.prototype,o,(function(){var t=n(this),e=String(t.source),a=t.flags,i=String(void 0===a&&t instanceof RegExp&&!("flags"in c)?s.call(t):a);return"/"+e+"/"+i}),{unsafe:!0})},"2bf6":function(t,e,a){"use strict";a("8439")},"42a5":function(t,e,a){"use strict";a("c703")},"441a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-block"},[a("div",{staticClass:"create"},[a("div",{staticClass:"create__status"},[a("div",{staticClass:"custom-control custom-switch custom-switch-on-success"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.status,expression:"pageData.status"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customSwitch3"},domProps:{checked:Array.isArray(t.pageData.status)?t._i(t.pageData.status,null)>-1:t.pageData.status},on:{change:function(e){var a=t.pageData.status,i=e.target,n=!!i.checked;if(Array.isArray(a)){var r=null,s=t._i(a,r);i.checked?s<0&&t.$set(t.pageData,"status",a.concat([r])):s>-1&&t.$set(t.pageData,"status",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.pageData,"status",n)}}}),t.pageData.status?a("label",{staticClass:"custom-control-label",attrs:{for:"customSwitch3"}},[t._v(" Показывать ")]):a("label",{staticClass:"custom-control-label",attrs:{for:"customSwitch3"}},[t._v("Не показывать ")])])]),a("div",{staticClass:"create__name d-flex"},[a("p",[t._v("Название")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.name,expression:"pageData.name"}],attrs:{type:"text",placeholder:"Название"},domProps:{value:t.pageData.name},on:{input:function(e){e.target.composing||t.$set(t.pageData,"name",e.target.value)}}})]),a("div",{staticClass:"create__description d-flex"},[a("p",[t._v("Описание")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.pageData.description,expression:"pageData.description"}],attrs:{type:"text",placeholder:"Описание"},domProps:{value:t.pageData.description},on:{input:function(e){e.target.composing||t.$set(t.pageData,"description",e.target.value)}}})]),a("div",{staticClass:"create__main-img d-flex"},[a("p",[t._v("Главная картинка")]),a("PagesAddImage",{attrs:{sourceData:t.pageData.mainImage},on:{mainImageChanged:t.mainImageFile}})],1),a("div",{staticClass:"create__gallery"},[a("p",[t._v("Галерея картинок")]),a("div",{staticClass:"d-flex"},[a("p",[t._v("Размер: 1000х190")]),a("div",{staticClass:"create__gallery-img d-flex flex-wrap"},[t._l(t.galleryData,(function(e,i){return a("PagesAddGallery",{key:e.name,staticClass:"gallery__block",attrs:{data:e},on:{remove:function(e){return t.galleryData.splice(i,1)}}})})),a("button",{staticClass:"btn btn-default gallery__block-add",on:{click:function(e){return t.openFileDialog()}}},[a("input",{ref:"fileDialog",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.addImage}}),t._v(" Добавить"),a("br"),t._v("фото ")])],2)])]),a("div",{staticClass:"create__seo d-flex"},[a("p",[t._v("SEO блок:")]),a("div",{staticClass:"create__seo-info"},[a("div",{staticClass:"create__seo-info-block d-flex"},[a("p",[t._v("URL:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.SEO.url,expression:"pageData.SEO.url"}],attrs:{type:"text",placeholder:"URL"},domProps:{value:t.pageData.SEO.url},on:{input:function(e){e.target.composing||t.$set(t.pageData.SEO,"url",e.target.value)}}})]),a("div",{staticClass:"create__seo-info-block d-flex"},[a("p",[t._v("Title:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.SEO.title,expression:"pageData.SEO.title"}],attrs:{type:"text",placeholder:"Title"},domProps:{value:t.pageData.SEO.title},on:{input:function(e){e.target.composing||t.$set(t.pageData.SEO,"title",e.target.value)}}})]),a("div",{staticClass:"create__seo-info-block d-flex"},[a("p",[t._v("Keywords:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.SEO.keyword,expression:"pageData.SEO.keyword"}],attrs:{type:"text",placeholder:"word"},domProps:{value:t.pageData.SEO.keyword},on:{input:function(e){e.target.composing||t.$set(t.pageData.SEO,"keyword",e.target.value)}}})]),a("div",{staticClass:"create__seo-info-block d-flex"},[a("p",[t._v("Description:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pageData.SEO.description,expression:"pageData.SEO.description"}],attrs:{type:"text",placeholder:"Description"},domProps:{value:t.pageData.SEO.description},on:{input:function(e){e.target.composing||t.$set(t.pageData.SEO,"description",e.target.value)}}})])])])]),a("button",{ref:"btnSave",staticClass:"btn btn-default btn-save",on:{click:t.mainImagePromise}},[t._v(" Сохранить ")])])},n=[],r=(a("b0c0"),a("d3b7"),a("4de4"),a("3ca3"),a("ddb0"),a("d81d"),a("7db0"),a("99af"),a("25f0"),a("b64b"),a("e6df")),s=a("2506"),o=a("2591"),c={name:"PagesAddNewPage",components:{PagesAddImage:r["a"],PagesAddGallery:s["a"]},props:["dataArr","dataOb","dbRef"],data:function(){return{ref:this.dbRef,dataSource:[],galleryData:[],pageData:{id:"",name:"",status:!1,date:"",description:"",galleryImages:[],link:"",SEO:{url:"",title:"",keyword:"",description:""}}}},methods:{openFileDialog:function(){this.$refs.fileDialog.click()},addImage:function(){var t=this.$refs.fileDialog.files[0];void 0!==t&&this.galleryData.push({name:t.name,imageFile:t})},mainImageFile:function(t){void 0!==t&&(this.pageData.mainImage=t)},mainImagePromise:function(){var t=this;this.$refs.btnSave.classList.add("show"),this.$refs.btnSave.textContent="Сохраняется";var e=o["a"].storage().ref(this.mainImageRef);void 0!==this.pageData.mainImage&&void 0===this.pageData.mainImage.imageUrl?new Promise((function(a){a(e.child(t.pageData.mainImage.name).put(t.pageData.mainImage).then((function(t){return t.ref.getDownloadURL()})).then((function(e){return{name:t.pageData.mainImage.name,imageUrl:e}})))})).then((function(e){return t.galleryPromise(e)})):void 0!==this.pageData.mainImage&&void 0!==this.pageData.mainImage.imageUrl?this.galleryPromise(this.pageData.mainImage):(alert("Укажите главную картинку"),this.$refs.btnSave.textContent="Сохранить",this.$refs.btnSave.classList.remove("show"))},galleryPromise:function(t){var e=this,a=o["a"].storage().ref(this.galleryRef);if(this.galleryData.length>0){var i=this.galleryData.filter((function(t){return void 0===t.id}));Promise.all(i.map((function(t){if(void 0!==t.imageFile)return new Promise((function(e){e(a.child(t.name).put(t.imageFile).then((function(t){return t.ref.getDownloadURL()})).then((function(e){return t={id:Math.floor(1e4*Math.random()),name:t.name,imageUrl:e}})))}))}))).then((function(a){return e.saveData(t,a)}))}else alert("Выберете картинки для галереи"),this.$refs.btnSave.textContent="Сохранить",this.$refs.btnSave.classList.remove("show")},saveData:function(t,e){var a=this,i=this.dataSource.find((function(t){return t.id===a.pageData.id}));if(void 0!==i){var n=this.galleryData.filter((function(t){return void 0!==t.id})),r=n.concat(e);this.onUpload(t,r)}else this.onUpload(t,e)},onUpload:function(t,e){var a,i,n=this,r=this.dataSource.filter((function(t){return t.id!==n.pageData.id})),s=new Date;1===s.getDate().toString().length&&(a="0"+s.getDate()),1===s.getMonth().toString().length&&(i="0"+s.getMonth());var c=s.getFullYear(),l="".concat(a,".").concat(i,".").concat(c);this.pageData.date=l,this.pageData.id=Math.floor(1e4*Math.random()),this.pageData.mainImage=t,this.pageData.galleryImages=e,r.push(this.pageData);var d=o["a"].database().ref(this.ref);d.set(r).then(this.$refs.btnSave.textContent="Сохранено").then(this.$refs.btnSave.classList.remove("show")).then(this.$router.push("/admin/pages"))}},created:function(){void 0!==this.dataArr&&this.dataArr.length>0?(this.dataSource=this.dataArr,void 0!==this.dataOb&&0!==Object.keys(this.dataOb).length&&(this.pageData=this.dataOb,0!==this.dataOb.galleryImages.length&&(this.galleryData=this.dataOb.galleryImages))):void 0===this.dataArr&&this.$router.push("/admin/pages")}},l=c,d=(a("e3fb"),a("2877")),u=Object(d["a"])(l,i,n,!1,null,"737a2807",null);e["default"]=u.exports},"4de4":function(t,e,a){"use strict";var i=a("23e7"),n=a("b727").filter,r=a("1dde"),s=r("filter");i({target:"Array",proto:!0,forced:!s},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"65f0":function(t,e,a){var i=a("861d"),n=a("e8b5"),r=a("b622"),s=r("species");t.exports=function(t,e){var a;return n(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?i(a)&&(a=a[s],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},"6ec9":function(t,e,a){},"7db0":function(t,e,a){"use strict";var i=a("23e7"),n=a("b727").find,r=a("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),i({target:"Array",proto:!0,forced:o},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(s)},8418:function(t,e,a){"use strict";var i=a("c04e"),n=a("9bf2"),r=a("5c6c");t.exports=function(t,e,a){var s=i(e);s in t?n.f(t,s,r(0,a)):t[s]=a}},8439:function(t,e,a){},"99af":function(t,e,a){"use strict";var i=a("23e7"),n=a("d039"),r=a("e8b5"),s=a("861d"),o=a("7b0b"),c=a("50c4"),l=a("8418"),d=a("65f0"),u=a("1dde"),f=a("b622"),g=a("2d00"),m=f("isConcatSpreadable"),p=9007199254740991,v="Maximum allowed index exceeded",h=g>=51||!n((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),b=u("concat"),D=function(t){if(!s(t))return!1;var e=t[m];return void 0!==e?!!e:r(t)},y=!h||!b;i({target:"Array",proto:!0,forced:y},{concat:function(t){var e,a,i,n,r,s=o(this),u=d(s,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(r=-1===e?s:arguments[e],D(r)){if(n=c(r.length),f+n>p)throw TypeError(v);for(a=0;a<n;a++,f++)a in r&&l(u,f,r[a])}else{if(f>=p)throw TypeError(v);l(u,f++,r)}return u.length=f,u}})},ad6d:function(t,e,a){"use strict";var i=a("825a");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},b0c0:function(t,e,a){var i=a("83ab"),n=a("9bf2").f,r=Function.prototype,s=r.toString,o=/^\s*function ([^ (]*)/,c="name";i&&!(c in r)&&n(r,c,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},b64b:function(t,e,a){var i=a("23e7"),n=a("7b0b"),r=a("df75"),s=a("d039"),o=s((function(){r(1)}));i({target:"Object",stat:!0,forced:o},{keys:function(t){return r(n(t))}})},b727:function(t,e,a){var i=a("0366"),n=a("44ad"),r=a("7b0b"),s=a("50c4"),o=a("65f0"),c=[].push,l=function(t){var e=1==t,a=2==t,l=3==t,d=4==t,u=6==t,f=7==t,g=5==t||u;return function(m,p,v,h){for(var b,D,y=r(m),_=n(y),w=i(p,v,3),S=s(_.length),x=0,C=h||o,I=e?C(m,S):a||f?C(m,0):void 0;S>x;x++)if((g||x in _)&&(b=_[x],D=w(b,x,y),t))if(e)I[x]=D;else if(D)switch(t){case 3:return!0;case 5:return b;case 6:return x;case 2:c.call(I,b)}else switch(t){case 4:return!1;case 7:c.call(I,b)}return u?-1:l||d?d:I}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},c703:function(t,e,a){},d81d:function(t,e,a){"use strict";var i=a("23e7"),n=a("b727").map,r=a("1dde"),s=r("map");i({target:"Array",proto:!0,forced:!s},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},e3fb:function(t,e,a){"use strict";a("6ec9")},e6df:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-block flex-wrap"},[void 0!==t.imageData?a("img",{ref:"filePreview",staticClass:"preview",attrs:{src:t.imageData}}):t._e(),a("input",{ref:"fileDialog",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.addImage}}),void 0===t.imageData?a("button",{staticClass:"btn btn-default",on:{click:t.openFileDialog}},[t._v(" Добавить ")]):t._e(),void 0!==t.imageData?a("button",{staticClass:"btn btn-default info-block__remove",on:{click:t.deleteImage}},[t._v(" Удалить ")]):t._e()])},n=[],r={name:"SharesAddImage",props:["sourceData"],data:function(){return{imageData:this.sourceData}},methods:{openFileDialog:function(){var t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});this.$refs.fileDialog.dispatchEvent(t)},addImage:function(){var t=this.$refs.fileDialog.files[0];this.previewImage(t)},previewImage:function(t){var e=this,a=new FileReader;a.readAsDataURL(t),a.onload=function(t){e.imageData=t.target.result},this.$emit("mainImageChanged",t)},deleteImage:function(){this.imageData=void 0,this.$emit("mainImageChanged",void 0)}},mounted:function(){void 0!==this.imageData&&(null!==this.imageData.imageUrl&&void 0!==this.imageData.imageUrl?this.$refs.filePreview.src=this.imageData.imageUrl:this.previewImage(this.imageData.imageFile))}},s=r,o=(a("2bf6"),a("2877")),c=Object(o["a"])(s,i,n,!1,null,"2f611f0e",null);e["a"]=c.exports},e8b5:function(t,e,a){var i=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==i(t)}}}]);
//# sourceMappingURL=chunk-68351d61.22685efe.js.map